[defaults]
# Inventory file location
inventory = inventory/hosts

# Use the 'all' inventory plugin by default, but also support ini files
inventory_plugins = host_list, script, auto, yaml, ini, toml

# Use the 'community.general' collection for Ubuntu-specific modules
collections_paths = ./collections

# SSH connection settings optimized for Ubuntu servers
[ssh_connection]
# Use SSH ControlPersist for faster connections
control_path_dir = ~/.ansible/cp
pipelining = True
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null

# Retry settings
retry_files_enabled = False

# Host key checking (set to False for convenience, but consider True for production)
host_key_checking = False

# Timeout settings
timeout = 30

# Privilege escalation (sudo)
[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False

# Output and display
[defaults]
# Display skipped tasks
display_skipped_hosts = True

# Use callback plugins for better output
stdout_callback = yaml

# Logging
log_path = ./ansible.log

# Performance optimizations
[defaults]
# Use fact caching (optional - uncomment if you want to enable)
# fact_caching = jsonfile
# fact_caching_connection = ./fact_cache
# fact_caching_timeout = 3600

# Gathering facts
gathering = smart
gather_subset = !all,network,hardware,virtual

# Forks (parallel execution)
forks = 10

# Error handling
error_on_undefined_vars = True
